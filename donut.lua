A,B,buffer,zbuffer=0,0,{} ,{};io.write("\27[2J");while true do for i=1,1760 do buffer[i]=" ";zbuffer[i]=0 end;for j=0,6.28,0.07 do for i=0,6.28,0.02 do c=math.sin(i);d=math.cos(j);e=math.sin(A);f=math.sin(j);g=math.cos(A);h=d+2;D=1/(c*h*e+f*g+5);l=math.cos(i);m=math.cos(B);n=math.sin(B);t=c*h*g-f*e;x=math.floor(40+30*D*(l*h*m-t*n));y=math.floor(12+15*D*(l*h*n+t*m));o=x+80*y;N=math.floor(8*((f*e-c*d*g)*m-c*d*e-f*g-l*d*n));if y>0 and y<22 and x>0 and x<80 and D>zbuffer[o] then zbuffer[o]=D;buffer[o]=string.sub(".,-~:;=!*#$@",(N>0 and N or 0)+1,(N>0 and N or 0)+1) end end end;io.write("\27[H");for k=1,1760 do io.write(k%80~=0 and buffer[k] or"\n") end;A=A+0.04;B=B+0.02;os.execute("sleep 0.016") end
